"use strict";function _createForOfIteratorHelper(t,e){var n,i,o,a,r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(r)return i=!(n=!0),{s:function(){r=r.call(t)},n:function(){var t=r.next();return n=t.done,t},e:function(t){i=!0,o=t},f:function(){try{n||null==r.return||r.return()}finally{if(i)throw o}}};if(Array.isArray(t)||(r=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length)return r&&(t=r),a=0,{s:e=function(){},n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:e};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){var n;if(t)return"string"==typeof t?_arrayLikeToArray(t,e):"Map"===(n="Object"===(n=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(t,e):void 0}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var github_canlendar=function(e,k){var n,i,o,a,r=["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],I=[],l="",d="",c="",s=0,T=[],z=[],p=[],g=[],u=0,f=0,b=[],x=[];function h(){var t,e,n,i,o,a=window.devicePixelRatio||1,p=document.getElementById("git_tooltip_container"),g="",u="",f="",b="",x=document.getElementById("gitcanvas"),r=(x.style.width="100%",x.style.height="",document.getElementById("gitmessage"),x.getContext("2d")),l=x.width=document.getElementById("gitcalendarcanvasbox").offsetWidth,d=x.height=8.64*x.width/T.length,c=(t=x,e=r,1<(a=a)&&(n=t.width,i=t.height,t.width=n*a,t.height=i*a,t.style.width="100%",t.style.height=i+"px",e.scale(a,a)),d/9),h=.8*c,s={x:.02*l,y:.025*l};for(o in T){var m,y=T[o];for(m in y){var v={date:"",count:"",x:0,y:0};z.push(v),r.fillStyle=A(k,y[m].count),s.y=Math.round(100*s.y)/100,v.date=y[m].date,v.count=y[m].count,v.x=s.x,v.y=s.y,r.fillRect(s.x,s.y,h,h),s.y=s.y+c}s.y=.025*l,s.x=s.x+c}if(700<document.body.clientWidth){r.font="600  Arial",r.fillStyle="#aaa",r.fillText("日",0,1.9*c),r.fillText("二",0,3.9*c),r.fillText("四",0,5.9*c),r.fillText("六",0,7.9*c);var w,_=l/24;for(w in I)r.fillText(I[w],_,.7*c),_+=l/12}x.onmousemove=function(t){document.querySelector(".gitmessage")&&(p.innerHTML="");var e,n=x,i=t,t=n.getBoundingClientRect(),o=i.clientX-t.left*(n.width/t.width),a=i.clientY-t.top*(n.height/t.height),r=_createForOfIteratorHelper(z);try{for(r.s();!(e=r.n()).done;){var l,d=e.value,c=o-d.x,s=a-d.y;0<c&&c<h&&0<s&&s<h&&(f=d.date,b=d.count,g=i.clientX-100,u=i.clientY-60,l=B(g,u,f,b),append_div_gitcalendar(p,l))}}catch(t){r.e(t)}finally{r.f()}},p.onmousemove=function(t){document.querySelector(".gitmessage")&&(p.innerHTML="")}}function m(){if(0===f)y(52),y(51),y(50),y(49),y(48),u+=o[6].count,d=o[6].date;else{y(52),y(51),y(50),y(49);for(var t=f-1;t<b.length;t++)u+=b[t].count;d=b[f-1].date}}function y(t){var e,n=_createForOfIteratorHelper(T[t]);try{for(n.s();!(e=n.n()).done;){var i=e.value;u+=i.count}}catch(t){n.e(t)}finally{n.f()}}function v(){var t,e=_createForOfIteratorHelper(p);try{for(e.s();!(t=e.n()).done;){var n=t.value;s+=n.count}}catch(t){e.e(t)}finally{e.f()}}function w(t){if(6===f)c=p[0].date,v();else{t=t.contributions[51];c=t[f+1].date,v();for(var e=f;e<g.length;e++)s+=g[e].count}}fetch("https://gitcalendar.zfe.space/api?"+e).then(function(t){return t.json()}).then(function(t){T=t.contributions,n=t.total,b=T[48],o=T[47],i=t.contributions[0],p=t.contributions[52],g=t.contributions[51],f=p.length-1,l=p[f].date,i=i[0].date,a=+l.substring(5,7),x=r.splice(a,12-a),I=x.concat(r),w(t),m();t=_(I,T,e,k,n,u,s,i,l,c,d);append_div_gitcalendar(github_container,t),document.getElementById("github_loading")&&document.getElementById("github_loading").remove(),h()}).catch(function(t){console.log(t)}),window.onresize=function(){h()},window.onscroll=function(){document.querySelector(".gitmessage")&&(git_tooltip_container.innerHTML="")};var A=function(t,e){return 0===e?(parseInt(e/2),t[0]):e<2?t[1]:e<20?t[parseInt(e/2)]:t[9]},B=function(t,e,n,i){var o="";return o+='<div class="gitmessage" style="top:'+e+"px;left:"+t+'px;position: fixed;z-index:9999"><div class="angle-wrapper" style="display:block;"><span>'+n+"&nbsp;</span><span>"+i+" 次上传</span></div></div>"},_=function(t,e,n,i,o,a,r,l,d,c,s){var p,g="";return p="",g+('<div class="position-relative"><div class="border py-2 graph-before-activity-overview"><div class="js-gitcalendar-graph mx-md-2 mx-3 d-flex flex-column flex-items-end flex-xl-items-center overflow-hidden pt-1 is-graph-loading graph-canvas gitcalendar-graph height-full text-center"><div id="gitcalendarcanvasbox"> <canvas id="gitcanvas" style="animation: none;"></canvas></div></div>'+(p+='<div id="git_tooltip_container"></div><div class="contrib-footer clearfix mt-1 mx-3 px-3 pb-1"><div class="float-left text-gray">数据来源 <a href="https://github.com/'+n+'" target="blank">@'+n+'</a></div><div class="contrib-legend text-gray">Less <ul class="legend"><li style="background-color:'+i[0]+'"></li><li style="background-color:'+i[2]+'"></li><li style="background-color:'+i[4]+'"></li><li style="background-color:'+i[6]+'"></li><li style="background-color:'+i[8]+'"></li></ul>More </div></div>')+"</div></div>")+('<div style="display:flex;width:100%"><div class="contrib-column contrib-column-first table-column"><span class="text-muted">过去一年提交</span><span class="contrib-number">'+o+'</span><span class="text-muted">'+l+"&nbsp;-&nbsp;"+d+'</span></div><div class="contrib-column table-column"><span class="text-muted">最近一月提交</span><span class="contrib-number">'+a+'</span><span class="text-muted">'+s+"&nbsp;-&nbsp;"+d+'</span></div><div class="contrib-column table-column"><span class="text-muted">最近一周提交</span><span class="contrib-number">'+r+'</span><span class="text-muted">'+c+"&nbsp;-&nbsp;"+d+"</span></div></div>"+E())},E=function(){return'<style>#github_container{text-align:center;margin:0 auto;width:100%;display:flex;display:-webkit-flex;justify-content:center;align-items:center;flex-wrap:wrap;}.gitcalendar-graph text.wday,.gitcalendar-graph text.month{font-size:10px;fill:#aaa;}.contrib-legend{text-align:right;padding:0 14px 10px 0;display:inline-block;float:right;}.contrib-legend .legend{display:inline-block;list-style:none;margin:0 5px;position:relative;bottom:-1px;padding:0;}.contrib-legend .legend li{display:inline-block;width:10px;height:10px;}.text-small{font-size:12px;color:#767676;}.gitcalendar-graph{padding:15px 0 0;text-align:center;}.contrib-column{text-align:center;border-left:1px solid #ddd;border-top:1px solid #ddd;font-size:11px;}.contrib-column-first{border-left:0;}.table-column{padding:10px;display:table-cell;flex:1;vertical-align:top;}.contrib-number{font-weight:300;line-height:1.3em;font-size:24px;display:block;}.gitcalendar img.spinner{width:70px;margin-top:50px;min-height:70px;}.monospace{text-align:center;color:#000;font-family:monospace;}.monospace a{color:#1D75AB;text-decoration:none;}.contrib-footer{font-size:11px;padding:0 10px 12px;text-align:left;width:100%;box-sizing:border-box;height:26px;}.left.text-muted{float:left;margin-left:9px;color:#767676;}.left.text-muted a{color:#4078c0;text-decoration:none;}.left.text-muted a:hover,.monospace a:hover{text-decoration:underline;}h2.f4.text-normal.mb-3{display:none;}.float-left.text-gray{float:left;}#user-activity-overview{display:none;}.day-tooltip{white-space:nowrap;position:absolute;z-index:99999;padding:10px;font-size:12px;color:#959da5;text-align:center;background:rgba(0,0,0,.85);border-radius:3px;display:none;pointer-events:none;}.day-tooltip strong{color:#dfe2e5;}.day-tooltip.is-visible{display:block;}.day-tooltip:after{position:absolute;bottom:-10px;left:50%;width:5px;height:5px;box-sizing:border-box;margin:0 0 0 -5px;content:" ";border:5px solid transparent;border-top-color:rgba(0,0,0,.85)}.position-relative{width:100%;}@media screen and (max-width:650px){.contrib-column{display:none}}.angle-wrapper{z-index:9999;display:inline;width:200px;height:40px;position:relative;padding:5px 0;background:rgba(0,0,0,0.8);border-radius:8px;text-align:center;color:white;}.angle-box{position:fixed;padding:10px}.angle-wrapper span{padding-bottom:1em;}.angle-wrapper:before{content:"";width:0;height:0;border:10px solid transparent;border-top-color:rgba(0,0,0,0.8);position:absolute;left:47.5%;top:100%;}</style>'}},append_div_gitcalendar=function(t,e){if("string"==typeof e){for(var n=document.createElement("div"),i=(n.innerHTML=e,document.createDocumentFragment());n.firstChild;)i.appendChild(n.firstChild);t.appendChild(i)}else t.appendChild(e)},loading_git=function(t){return'<div id="github_loading" style="width:10%;height:100%;margin:0 auto;display: block"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"  viewBox="0 0 50 50" style="enable-background:new 0 0 50 50" xml:space="preserve"><path fill="'+t+'" d="M25.251,6.461c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615V6.461z" transform="rotate(275.098 25 25)"><animateTransform attributeType="xml" attributeName="transform" type="rotate" from="0 25 25" to="360 25 25" dur="0.6s" repeatCount="indefinite"></animateTransform></path></svg></div>'};!function(){var t=document.getElementById("github_container"),e=(document.getElementById("github_loading"),["#ebedf0","#fdcdec","#fc9bd9","#fa6ac5","#f838b2","#f5089f","#c4067e","#92055e","#540336","#48022f","#30021f"]);append_div_gitcalendar(t,loading_git(e[4])),github_canlendar("ht-echo",e)}();